window.showMe985211=window.showMe985211||{},showMe985211.base=function(){function e(){}return e.prototype.getConfig=function(e){chrome.storage.sync.get("config",function(n){e(n)})},e.prototype.setConfig=function(e,n){chrome.storage.sync.set({config:e},function(){n(e)})},e.prototype.getWriteList=function(e){var n=this;n.getColleges(function(t){var o=t.cnCollegesData,a=t.globalCollegesData;n.getConfig(function(t){var r=t.config,s=n.getByCollegesConfig(o,a,r)||{};e(s)})})},e.prototype.getByCollegesConfig=function(e,n,t){function o(e){if(!e)return[];var n;return n=e.indexOf(",")>0?e.split(","):e.indexOf(" ")>0?e.split(" "):e.split("\uff0c")}function a(e,n){return n.every(function(n){return e.indexOf(n)!==-1})}function r(e){var n=[];return e.forEach(function(e){e&&n.push({name:e.replace(/\s/g,"")})}),n}function s(e){var n=[];return e.forEach(function(e){n.push(e.name),e.name_en&&n.push(e.name_en)}),n}var l=[],i=[];if("replace"===t.manual)return l=o(t.manualContent),{lists:l,items:r(l)};t.cn&&t.cn.length>0&&e.forEach(function(e){a(e.tags,t.cn)&&i.push(e)}),t.global&&"-1"!=t.global&&n.forEach(function(e){a(e.tags,[t.global])&&i.push(e)});var c,u;return"add"===t.manual&&(c=o(t.manualContent),u=r(c),i=i.concat(u)),{lists:s(i),items:i}},e.prototype.getColleges=function(e){function n(){r.cnCollegesData&&r.globalCollegesData&&(t.result=r,e(r))}var t=this;if(t.result)return e(t.result);var o=chrome.extension.getURL("libs/data/colleges-cn.json"),a=chrome.extension.getURL("libs/data/colleges-global.json"),r={cnCollegesData:!1,globalCollegesData:!1};t.ajax({url:o,success:function(e){r.cnCollegesData=e,n()}}),t.ajax({url:a,success:function(e){r.globalCollegesData=e,n()}})},e.prototype.queryParse=function(e){var n={},t=e||window.location.href;return t.replace(/([^?=&#]+)=([^?=&#]+)/g,function(){n[arguments[1]]=decodeURIComponent(arguments[2])}),n},e.prototype.getParmeter=function(e){var n="";for(var t in e)n=n+t+"="+e[t]+"&";return n.slice(0,-1)},e.prototype.ajax=function(e){if(null==e||"object"!=typeof e)return!1;var n=e.type||"get",t=e.url||location.pathname,o=e.data||{};o=this.getParmeter(o);var a=e.success||function(){},r=new XMLHttpRequest;"get"==n&&(t=t+"?"+o,o=null),r.open(n,t),"post"==n&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(o),r.onreadystatechange=function(){if(200==r.status&&4==r.readyState){var e=null,n=r.getResponseHeader("Content-Type");e=n.indexOf("json")!=-1?JSON.parse(r.responseText):n.indexOf("xml")!=-1?r.responseXML:r.responseText,a(e)}}},new e}();