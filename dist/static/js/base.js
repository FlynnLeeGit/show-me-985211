window.showMe985211=window.showMe985211||{},showMe985211.base=function(){function e(){this.config,this.writeList,this.init()}return e.prototype.init=function(){this.getConfig(),this.getWriteList()},e.prototype.getConfig=function(e){var t=this;t.config&&e&&e(t.config),chrome.storage.sync.get("config",function(n){n=n||{},n.config=n.config||{cn:["pro-985","pro-211"],global:"top-300",manual:"-1",manualContent:"",autoSayhi:"confirm",edu:"bachelor",age:"-1",ageMin:22,ageMax:0},t.config=n,e&&e(n)})},e.prototype.setConfig=function(e,t){chrome.storage.sync.set({config:e},function(){t(e)})},e.prototype.getWriteList=function(e){var t=this;t.writeList&&e&&e(t.writeList),t.getColleges(function(n){var r=n.cnCollegesData,o=n.globalCollegesData;t.getConfig(function(n){var a=n.config,s=t.getByCollegesConfig(r,o,a)||{};t.writeList=s,e&&e(s)})})},e.prototype.getByCollegesConfig=function(e,t,n){function r(e){if(!e)return[];var t;return t=e.indexOf(",")>0?e.split(","):e.indexOf(" ")>0?e.split(" "):e.split("\uff0c")}function o(e,t){return t.every(function(t){return e.indexOf(t)!==-1})}function a(e){var t=[];return e.forEach(function(e){e&&t.push({name:e.replace(/\s/g,"")})}),t}function s(e){var t=[];return e.forEach(function(e){t.push(e.name),e.name_en&&t.push(e.name_en)}),t}var i=[],u=[];if("replace"===n.manual)return i=r(n.manualContent),{lists:i,items:a(i)};n.cn&&n.cn.length>0&&e.forEach(function(e){o(e.tags,n.cn)&&u.push(e)}),n.global&&"-1"!=n.global&&t.forEach(function(e){o(e.tags,[n.global])&&u.push(e)});var c,l;return"add"===n.manual&&(c=r(n.manualContent),l=a(c),u=u.concat(l)),{lists:s(u),items:u}},e.prototype.getColleges=function(e){function t(){a.cnCollegesData&&a.globalCollegesData&&(n.result=a,e(a))}var n=this;if(n.result)return e(n.result);var r=chrome.extension.getURL("libs/data/colleges-cn.json"),o=chrome.extension.getURL("libs/data/colleges-global.json"),a={cnCollegesData:!1,globalCollegesData:!1};n.ajax({url:r,success:function(e){a.cnCollegesData=e,t()}}),n.ajax({url:o,success:function(e){a.globalCollegesData=e,t()}})},e.prototype.queryParse=function(e){var t={},n=e||window.location.href;return n.replace(/([^?=&#]+)=([^?=&#]+)/g,function(){t[arguments[1]]=decodeURIComponent(arguments[2])}),t},e.prototype.getParmeter=function(e){var t="";for(var n in e)t=t+n+"="+e[n]+"&";return t.slice(0,-1)},e.prototype.ajax=function(e){if(null==e||"object"!=typeof e)return!1;var t=e.type||"get",n=e.url||location.pathname,r=e.data||{};r=this.getParmeter(r);var o=e.success||function(){},a=new XMLHttpRequest;"get"==t&&(n=n+"?"+r,r=null),a.open(t,n),"post"==t&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(r),a.onreadystatechange=function(){if(200==a.status&&4==a.readyState){var e=null,t=a.getResponseHeader("Content-Type");e=t&&t.indexOf("json")==-1?t.indexOf("xml")!=-1?a.responseXML:a.responseText:JSON.parse(a.responseText),o(e)}}},e.prototype.checkMatch=function(e,t){function n(e){return e.replace(/[\(\)\uff08\uff09]/g,"")}var r=this;if(!r.writeList||!r.config)return alert("\u83b7\u53d6\u767d\u540d\u5355\u9662\u6821\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u540e\u518d\u8bd5\uff01"),{result:!1,message:"\u83b7\u53d6\u767d\u540d\u5355\u9662\u6821\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u540e\u518d\u8bd5\uff01"};cfg=Object.assign({isStrict:!0},t);var o=r.config.config;if("-1"!==o.age){var a=e.match(/(\d+)\ *\u5c81/)||[],s=a[1];if(s){if(s=parseInt(s),0!==o.ageMin&&s<o.ageMin)return{result:!1,message:"\u5e74\u9f84\u592a\u5c0f\u5566"};if(0!==o.ageMax&&s>o.ageMax)return{result:!1,message:"\u5e74\u9f84\u592a\u5927\u5566"}}}if(e=n(e),cfg.isStrict&&/\u5927\u4e13/g.test(e))return{result:!1,message:"\u5305\u542b\u201c\u5927\u4e13\u201d\u5b57\u6bb5"};var i,u=r.writeList.lists.some(function(t){t=n(t);var r=e.indexOf(t)>-1;return r&&(i="\u5339\u914d\u5230\u9662\u6821\uff1a"+t),r});if(!u)return{result:!1,message:"\u4e0d\u5728\u914d\u7f6e\u7684\u9662\u6821\u767d\u540d\u5355\u5185"};var c={bachelor:function(e){return/\u5b66\u58eb|\u672c\u79d1|\u7855\u58eb|\u535a\u58eb/g.test(e)?{result:!0}:{result:!1,message:"\u4e0d\u5305\u542b\u201c\u672c\u79d1\uff08\u5b66\u58eb\uff09\u3001\u7855\u58eb\u3001\u535a\u58eb\u201d\u7b49\u5b66\u5386\u4fe1\u606f(\u89c4\u5219\u4e3a\u81f3\u5c11\u672c\u79d1)"}},master:function(e){return/\u7855\u58eb|\u535a\u58eb/g.test(e)?{result:!0}:{result:!1,message:"\u4e0d\u5305\u542b\u201c\u7855\u58eb\u3001\u535a\u58eb\u201d\u7b49\u5b66\u5386\u4fe1\u606f(\u89c4\u5219\u4e3a\u81f3\u5c11\u7855\u58eb)"}},doctor:function(e){return/\u535a\u58eb/g.test(e)?{result:!0}:{result:!1,message:"\u4e0d\u5305\u542b\u201c\u535a\u58eb\u201d\u7b49\u5b66\u5386\u4fe1\u606f(\u89c4\u5219\u4e3a\u81f3\u5c11\u535a\u58eb)"}}},l=c[o.edu]||c.bachelor,g=l.call(this,e);return g.result===!1?g:{result:!0,message:i}},e.prototype.getAgeByBrith=function(e){return e=parseInt("19"+e),isNaN(e)?0:(new Date).getFullYear()-e},new e}();