window.showMe985211=window.showMe985211||{},showMe985211.base=function(){function e(){this.config,this.writeList,this.init()}return e.prototype.init=function(){this.getConfig(),this.getWriteList()},e.prototype.getConfig=function(e){var t=this;t.config&&e&&e(t.config),chrome.storage.sync.get("config",function(n){n=n||{},n.config=n.config||{cn:["pro-985","pro-211"],global:"top-300",manual:"-1",manualContent:"",autoSayhi:"confirm",age:"-1",ageMin:22,ageMax:0},t.config=n,e&&e(n)})},e.prototype.setConfig=function(e,t){chrome.storage.sync.set({config:e},function(){t(e)})},e.prototype.getWriteList=function(e){var t=this;t.writeList&&e&&e(t.writeList),t.getColleges(function(n){var o=n.cnCollegesData,r=n.globalCollegesData;t.getConfig(function(n){var a=n.config,i=t.getByCollegesConfig(o,r,a)||{};t.writeList=i,e&&e(i)})})},e.prototype.getByCollegesConfig=function(e,t,n){function o(e){if(!e)return[];var t;return t=e.indexOf(",")>0?e.split(","):e.indexOf(" ")>0?e.split(" "):e.split("\uff0c")}function r(e,t){return t.every(function(t){return e.indexOf(t)!==-1})}function a(e){var t=[];return e.forEach(function(e){e&&t.push({name:e.replace(/\s/g,"")})}),t}function i(e){var t=[];return e.forEach(function(e){t.push(e.name),e.name_en&&t.push(e.name_en)}),t}var s=[],c=[];if("replace"===n.manual)return s=o(n.manualContent),{lists:s,items:a(s)};n.cn&&n.cn.length>0&&e.forEach(function(e){r(e.tags,n.cn)&&c.push(e)}),n.global&&"-1"!=n.global&&t.forEach(function(e){r(e.tags,[n.global])&&c.push(e)});var l,u;return"add"===n.manual&&(l=o(n.manualContent),u=a(l),c=c.concat(u)),{lists:i(c),items:c}},e.prototype.getColleges=function(e){function t(){a.cnCollegesData&&a.globalCollegesData&&(n.result=a,e(a))}var n=this;if(n.result)return e(n.result);var o=chrome.extension.getURL("libs/data/colleges-cn.json"),r=chrome.extension.getURL("libs/data/colleges-global.json"),a={cnCollegesData:!1,globalCollegesData:!1};n.ajax({url:o,success:function(e){a.cnCollegesData=e,t()}}),n.ajax({url:r,success:function(e){a.globalCollegesData=e,t()}})},e.prototype.queryParse=function(e){var t={},n=e||window.location.href;return n.replace(/([^?=&#]+)=([^?=&#]+)/g,function(){t[arguments[1]]=decodeURIComponent(arguments[2])}),t},e.prototype.getParmeter=function(e){var t="";for(var n in e)t=t+n+"="+e[n]+"&";return t.slice(0,-1)},e.prototype.ajax=function(e){if(null==e||"object"!=typeof e)return!1;var t=e.type||"get",n=e.url||location.pathname,o=e.data||{};o=this.getParmeter(o);var r=e.success||function(){},a=new XMLHttpRequest;"get"==t&&(n=n+"?"+o,o=null),a.open(t,n),"post"==t&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(o),a.onreadystatechange=function(){if(200==a.status&&4==a.readyState){var e=null,t=a.getResponseHeader("Content-Type");e=t&&t.indexOf("json")==-1?t.indexOf("xml")!=-1?a.responseXML:a.responseText:JSON.parse(a.responseText),r(e)}}},e.prototype.checkMatch=function(e,t){function n(e){return e.replace(/[\(\)\uff08\uff09]/g,"")}var o=this;if(!o.writeList||!o.config)return alert("\u83b7\u53d6\u767d\u540d\u5355\u9662\u6821\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u540e\u518d\u8bd5\uff01"),{result:!1,message:"\u83b7\u53d6\u767d\u540d\u5355\u9662\u6821\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u540e\u518d\u8bd5\uff01"};cfg=Object.assign({isStrict:!0},t);var r=o.config.config;if("-1"!==r.age){var a=e.match(/(\d+)\ *\u5c81/)||[],i=a[1];if(i){if(i=parseInt(i),0!==r.ageMin&&i<r.ageMin)return{result:!1,message:"\u5e74\u9f84\u592a\u5c0f\u5566"};if(0!==r.ageMax&&i>r.ageMax)return{result:!1,message:"\u5e74\u9f84\u592a\u5927\u5566"}}}if(e=n(e),!/\u672c\u79d1|\u7855\u58eb|\u535a\u58eb/g.test(e))return{result:!1,message:"\u4e0d\u5305\u542b\u201c\u672c\u79d1\u3001\u7855\u58eb\u3001\u535a\u58eb\u201d\u7b49\u5b66\u5386\u4fe1\u606f"};if(cfg.isStrict&&/\u5927\u4e13/g.test(e))return{result:!1,message:"\u5305\u542b\u201c\u5927\u4e13\u201d\u5b57\u6bb5"};var s,c=o.writeList.lists.some(function(t){t=n(t);var o=e.indexOf(t)>-1;return o&&(s="\u5339\u914d\u5230\u9662\u6821\uff1a"+t),o});return c?{result:!0,message:s}:{result:!1,message:"\u4e0d\u5728\u914d\u7f6e\u7684\u9662\u6821\u767d\u540d\u5355\u5185"}},e.prototype.getAgeByBrith=function(e){return e=parseInt("19"+e),isNaN(e)?0:(new Date).getFullYear()-e},new e}();